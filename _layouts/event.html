---
layout: basic
---
{% assign rootResource = site.rootResource | rdf_get %}
{% capture eventsQuery %}
  SELECT DISTINCT ?e ?date ?description ?title ?slogan
  WHERE {
    BIND("{{ site.language }}" as ?language)
    <https://2022.dataweek.de/> schema:subEvent ?e . # remove if model is clear
    # <{{ rootResource }}> schema:subEvent ?e . # uncomment if model is clear
    ?e rdfs:label ?title ;
    dct:description ?description ;
    schema:date ?date .
    OPTIONAL {
      ?e schema:slogan ?slogan
      FILTER(langMatches(lang(?slogan), ?language))
    }
    FILTER(langMatches(lang(?description), ?language))
    FILTER(langMatches(lang(?title), ?language))
  } ORDER BY ?e
{% endcapture %}
{% assign events = page.rdf | sparql_query: eventsQuery %}

{% if site.language == "de" %}
  {% assign mobileLabel = "Veranstaltung" %}
  {% assign mobileHint = "Veranstaltung wählen" %}
  {% assign orgateam = "Die Organisatoren" %}
{% else %}
  {% assign mobileLabel = "Event" %}
  {% assign mobileHint = " Chose an event" %}
  {% assign orgateam = "Organization Team" %}
{% endif %}

<div class="content-header">
  {% assign subEvents = rootResource | rdf_property: "schema:subEvent", nil, true %}
  <h1>
    {% if site.language == "de" %}
      Die Veranstaltungen
    {% else %}
      Events
    {% endif %}
  </h1>
  <form class="filter only-small-screens" action="#">
    <div>
      <label for="form-select1" class="hideme">
        {{ mobileLabel }}
      </label> <select class="form-control" id="form-select1">
        <option value="">
          {{ mobileHint }}
        </option>
        {% for event in events %}
        {% assign eventShortName = event.e | replace: "https://dataweek.de/", "" | replace: "/", "" %}
          <option value="{{ eventShortName }}-{{ eventShortName }}">
            {{ eventShortName }}
          </option>
        {% endfor %}
      </select> <button type="submit">Anzeigen</button>
    </div>
  </form>
  <nav class="nav-sub1" aria-label="Untermenü Stufe 1">
    <ul>
    {% for event in events %}
      {% assign eventShortName = event.e | replace: "https://dataweek.de/", "" | replace: "/", "" %}
      {% if event.e == page.rdf %}
        <li class="open">
          <a class="active" href="{{ eventShortName }}"><span>{{ eventShortName }}</span>{{ eventShortName }}</a>
      {% else %}
        <li>
          <a href="{{ eventShortName }}"><span>{{ eventShortName }}</span>{{ eventShortName }}</a>
      {% endif %}
      </li>
    {% endfor %}
    </ul>
  </nav>

  <br/>
  <br/>
  <h2>
    {{ subEvent | rdf_property: "rdfs:label", site.language }}
  </h2>
  <p>
    Date: {{ subEvent | rdf_property: "schema:date" }}<br/>
    Slogan: {{ subEvent | rdf_property: "schema:slogan" }}<br/>
  </p>
  <p>
    {{ subEvent | rdf_property: "dct:description" , site.language }}
  </p>
</div>
{% assign organizer = page | rdf_property: "schema:organizer" %}
<h3>
  {% assign label = organizer | rdf_property: "rdfs:label" %}
  {% if label %}
    {{ label }}
  {% else %}
    {{ orgateam }}
  {% endif %}
</h3>
<div class="contact-list">
  {% assign organizerTeam = organizer | rdf_container %}
  <ul>
    {% for person in organizerTeam %}
      <li>
        {% include components/person.html organizer=person %}
      </li>
    {% endfor %}
  </ul>
</div>
