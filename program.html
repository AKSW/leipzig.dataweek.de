---
layout: basic
---
{% assign rootResource = site.rootResource | rdf_get %}
{% include components/menu_program.html %}

{% capture dayQuery %}
  SELECT DISTINCT ?day
  WHERE {
    ?resourceUri ?cmprop ?day .
    ?day dct:date ?date .
    ?cmprop a rdfs:ContainerMembershipProperty .
  }
  GROUP BY ?day
{% endcapture %}

{% capture subEventQuery %}
  SELECT DISTINCT ?subEvent (MIN(?sortDates) as ?sortDate)
  WHERE {
    ?resourceUri dct:date ?date .
    <{{rootResource}}> schema:subEvent ?subEvent .
    ?subEvent dct:date ?date , ?sortDates .
  }
  GROUP BY ?subEvent
  ORDER BY ?sortDate
{% endcapture %}

{% assign days = page.rdf | sparql_query: dayQuery %}

<div class="card-list">
  <ul>
  {% for row in days %}
    {% assign description = row.day | rdf_property: "dct:description", site.language %}
    <li>
      <div class="card">
        <h2>
          <a href="{{ row.day.render_path | relativize_url }}">
            <span class="xl hideunderline">{{ row.day | rdf_property: "rdfs:label", site.language }}</span>
          </a>
        </h2>
        <p>{{ row.day | rdf_property: "dct:title", site.language }}</p>
        <p class="dates">
          <time ev="">
            <strong class="highlighted x1">{{ row.day | rdf_property: "dct:subject" }}</strong><br/>
          </time>
        </p>
        {% if description %}
          {% assign sentences = description | split: ". " %}
          {% if sentences.size > 2 %}
            <p class="justify">
              <small>{{ sentences | slice: 0, 2 | join: ". " }}. </small>
            </p>
            <details>
              <summary>
                <small>Show more</small>
              </summary>
              <p class="justify">
                <small>{{ sentences | slice: 2, sentences.size | join: ". " }}</small>
              </p>
            </details>
          {% else %}
            <p class="justify"><small>{{ description }}</small></p>
          {% endif %}
        {% endif %}
      </div>
    </li>
  {% endfor %}
  </ul>
</div>
